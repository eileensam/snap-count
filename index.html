<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Snap-Count</title>
    <link href="style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>
<div id="bugnub-container"></div>
<script>
    // 1️⃣ Load EmailJS SDK first
    const emailjsScript = document.createElement("script");
    emailjsScript.src = "https://cdn.jsdelivr.net/npm/emailjs-com@3/dist/email.min.js";
    emailjsScript.onload = () => {

      // 2️⃣ Load bugnub markup
      fetch("bugnub.html")
        .then(res => res.text())
        .then(html => {
          document.getElementById("bugnub-container").innerHTML = html;

          // 3️⃣ Load bugnub.js after markup is in
          const bugnubJS = document.createElement("script");
          bugnubJS.src = "bugnub.js";
          document.body.appendChild(bugnubJS);
        });
    };
    document.body.appendChild(emailjsScript);
</script>

<h1>Snap-Count</h1>
<h3>NFL Pool</h3>

<h4 id="current-week"></h4>
<h4 id="season-type"></h4>

<br>

<!-- Global Group Toggle -->
<div id="group-toggle" style="margin: 10px 0;">
    <label>
        <input checked name="leaderboard-group" type="radio" value="snap">
        Small Group
    </label>
    <label style="margin-left: 10px;">
        <input name="leaderboard-group" type="radio" value="all">
        Full League
    </label>
</div>

<br>

<!-- Leaderboard -->
<section id="leaderboard">
    <h2>Leaderboard</h2>
    <table id="leaderboard-table">
        <thead>
        <tr>
            <th>Rank</th>
            <th>Player</th>
            <th>Total Points</th>
        </tr>
        </thead>
        <tbody>
        <!-- JS will populate this -->
        </tbody>
    </table>
</section>

<!-- Leaderboard Graph -->
<section id="leaderboard-graph">
    <canvas id="leaderboardChart"></canvas>
</section>

<br>

<!-- Player Breakdown -->
<section id="player-breakdown">
    <h2>Player Breakdown</h2>
    <label for="player-select">Select Player:</label>
    <select id="player-select">
        <!-- JS will populate this -->
    </select>

    <label for="week-select">Select Week:</label>
    <select id="week-select">
        <!-- JS will populate this -->
    </select>

    <table id="player-table">
        <thead>
        <tr>
            <th>Team</th>
            <th>Opponent</th>
            <th>Score</th>
            <th>Result</th>
            <th>Points</th>
        </tr>
        </thead>
        <tbody>
        <!-- JS will populate this -->
        </tbody>
    </table>
</section>

<hr class="divider">

<div class="fun-fact" id="nfl-fun-fact">
    Drake Maye and the New England Patriots snapped the Bills' 14-game home
    winning streak in a Week 5
    <a href="https://www.espn.com/nfl/story/_/id/46506090/drake-maye-leads-game-winning-drive-stefon-diggs-sensational-buffalo-return-patriots-stun-bills"
       rel="noopener noreferrer" target="_blank">23-20 victory</a>.
</div>

<script src="script.js" type="module"></script>
</body>
</html>
