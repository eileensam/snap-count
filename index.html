<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Snap-Count</title>
    <link href="style.css" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body>

<div id="header-container"></div>
<script type="module">
    import { initHeader, highlightActiveNav } from './header.js';
    import { initLeaderboard } from './script.js';

    fetch('header.html')
      .then(res => res.text())
      .then(async html => {
        document.getElementById('header-container').innerHTML = html;

        await initHeader();          // ensures state.currentWeek exists
        highlightActiveNav("index");
        await initLeaderboard();     // now safe to load data
      });
</script>

<br>

<!-- Global Group Toggle -->
<div id="group-toggle" style="margin: 10px 0;">
    <label>
        <input checked name="leaderboard-group" type="radio" value="snap">
        Small Group
    </label>
    <label style="margin-left: 10px;">
        <input name="leaderboard-group" type="radio" value="all">
        Full League
    </label>
</div>

<br>

<!-- Leaderboard -->
<section id="leaderboard">
    <h2>Leaderboard</h2>
    <table id="leaderboard-table">
        <thead>
        <tr>
            <th>Rank</th>
            <th>Player</th>
            <th>Total Points</th>
        </tr>
        </thead>
        <tbody>
        <!-- JS will populate this -->
        </tbody>
    </table>
</section>

<!-- Leaderboard Graph -->
<section id="leaderboard-graph">
    <canvas id="leaderboardChart"></canvas>
</section>

<br>

<!-- Player Breakdown -->
<section id="player-breakdown">
    <h2>Player Breakdown</h2>
    <label for="player-select">Select Player:</label>
    <select id="player-select">
        <!-- JS will populate this -->
    </select>

    <label for="week-select">Select Week:</label>
    <select id="week-select">
        <!-- JS will populate this -->
    </select>

    <table id="player-table">
        <thead>
        <tr>
            <th>Team</th>
            <th>Opponent</th>
            <th>Score</th>
            <th>Result</th>
            <th>Points</th>
        </tr>
        </thead>
        <tbody>
        <!-- JS will populate this -->
        </tbody>
    </table>
</section>

<hr class="divider">

<div class="fun-fact" id="nfl-fun-fact">
    Would you believe me if I said that Drake Maye became the
    <a href="https://www.espn.com/espn/betting/story/_/id/46909432/nfl-betting-week-10-afc-east-drake-maye-jets-bills-dolphins"
       rel="noopener noreferrer" target="_blank">
        NFL MVP favorite</a> after the Patriots' victory over the Buccs?
</div>

</body>
</html>
